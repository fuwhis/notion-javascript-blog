{"pageProps":{"id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad","title":"React subscribe form with Tailwind using ConvertKit API","categories":["React","API"],"thumbnail":"https://images.unsplash.com/photo-1596526131083-e8c633c948d2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80","publishedDate":"2022-08-17","lastEditedAt":"2025-02-12T06:21:00.000Z","summary":"How to make a subscription form with Tailwind and using Convertkit","content":[{"object":"block","id":"198764bb-1cf5-81c8-8385-c2e3e740b47f","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"API subscribe","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"API subscribe","href":null}]}},{"object":"block","id":"198764bb-1cf5-81bf-ba2a-d9cfa109d493","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"Here is a video of what we will be building today.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here is a video of what we will be building today.","href":null}]}},{"object":"block","id":"198764bb-1cf5-8112-b517-fb056a0ef0fa","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"typescript","text":[{"type":"text","text":{"content":"import isValidEmail from 'utils/isValidEmail';\n\nconst subscribeConvertkit = async (req, res) => {\n  const { email } = JSON.parse(req.body);\n\n  const isValid = isValidEmail(email);\n\n  if (!email) {\n    return res.status(400).json({ error: 'Email is required.' });\n  }\n\n  if (!isValid) {\n    return res.status(400).json({ error: 'Email is invalid.' });\n  }\n\n  try {\n    const FORM_ID = process.env.CONVERTKIT_FORM_ID;\n    const API_KEY = process.env.CONVERTKIT_API_KEY;\n    const API_URL = process.env.CONVERTKIT_API_URL;\n\n    const response = await fetch(`${API_URL}forms/${FORM_ID}/subscribe`, {\n      body: JSON.stringify({ email, api_key: API_KEY }),\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST'\n    });\n\n    // something went wrong on the convertkit server\n    if (response.status >= 400) {\n      return res\n        .status(400)\n        .json({ error: 'There was an error subscribing to the list.' });\n    }\n\n    // Success\n    return res.status(201).json({ error: null });\n  } catch (error) {\n    return res.status(500).json({ error: error.message || error.toString() });\n  }\n};\n\nexport default subscribeConvertkit;","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import isValidEmail from 'utils/isValidEmail';\n\nconst subscribeConvertkit = async (req, res) => {\n  const { email } = JSON.parse(req.body);\n\n  const isValid = isValidEmail(email);\n\n  if (!email) {\n    return res.status(400).json({ error: 'Email is required.' });\n  }\n\n  if (!isValid) {\n    return res.status(400).json({ error: 'Email is invalid.' });\n  }\n\n  try {\n    const FORM_ID = process.env.CONVERTKIT_FORM_ID;\n    const API_KEY = process.env.CONVERTKIT_API_KEY;\n    const API_URL = process.env.CONVERTKIT_API_URL;\n\n    const response = await fetch(`${API_URL}forms/${FORM_ID}/subscribe`, {\n      body: JSON.stringify({ email, api_key: API_KEY }),\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST'\n    });\n\n    // something went wrong on the convertkit server\n    if (response.status >= 400) {\n      return res\n        .status(400)\n        .json({ error: 'There was an error subscribing to the list.' });\n    }\n\n    // Success\n    return res.status(201).json({ error: null });\n  } catch (error) {\n    return res.status(500).json({ error: error.message || error.toString() });\n  }\n};\n\nexport default subscribeConvertkit;","href":null}]}},{"object":"block","id":"198764bb-1cf5-817c-872d-dafab2df1cea","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-813f-8991-e527451d5bf7","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"AddSubscriber fetcher","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"AddSubscriber fetcher","href":null}]}},{"object":"block","id":"198764bb-1cf5-81d9-9a99-c144006e8828","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"For submitting the subscription, let's create a simple handler that returns the result from the API call ðŸŽ‰ ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For submitting the subscription, let's create a simple handler that returns the result from the API call ðŸŽ‰ ","href":null}]}},{"object":"block","id":"198764bb-1cf5-814d-ae71-e287d51a95da","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"javascript","text":[{"type":"text","text":{"content":"export default async function addSubscriber(email) {\n  // The location of your API route\n  const url = '/api/subscribe-convertkit';\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ email })\n  });\n\n  const result = await response.json();\n\n  return result;\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export default async function addSubscriber(email) {\n  // The location of your API route\n  const url = '/api/subscribe-convertkit';\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ email })\n  });\n\n  const result = await response.json();\n\n  return result;\n}","href":null}]}},{"object":"block","id":"198764bb-1cf5-8158-9f54-d1dce410f02f","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-81cb-a35d-f7b60bcb90a3","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"React Subscribe component","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"React Subscribe component","href":null}]}},{"object":"block","id":"198764bb-1cf5-81bd-b59b-f8804b192aa6","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"Now we have the API ready and the fetcher ready, so we can get into creating the Subscribe component","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Now we have the API ready and the fetcher ready, so we can get into creating the Subscribe component","href":null}]}},{"object":"block","id":"198764bb-1cf5-813b-861c-c331fd6fea3d","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-81a2-9805-eab90b0b8ef2","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"javascript","text":[{"type":"text","text":{"content":"import Container from 'components/Container';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport addSubscriber from 'utils/addSubscriber';\nimport Confetti from './Confetti';\n\nexport default function Subscribe() {\n  const [formState, setFormState] = useState({ state: 'initial', message: '' });\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async data => {\n    setFormState({ state: 'loading', message: null });\n    const { error } = await addSubscriber(data.email);\n\n    if (error) {\n      return setFormState({ state: 'error', message: error });\n    }\n\n    return setFormState({\n      state: 'success',\n      message: 'Check your email to confirm your subscription'\n    });\n  };\n\n  return (\n    <div className=\"py-24 bg-gray-100\">\n      <Container>\n        <div className=\"sm:text-center\">\n          <div className=\"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n            Subscribe to the newsletter\n          </div>\n          <p className=\"max-w-2xl mx-auto mt-4 text-lg text-gray-500\">\n            Get emails from me about web development, tech, and early access to new\n            articles.\n          </p>\n        </div>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"mt-8 sm:mx-auto sm:max-w-lg sm:flex\"\n        >\n          <div className=\"flex-1 min-w-0\">\n            <label htmlFor=\"cta-email\" className=\"sr-only\">\n              Email address\n            </label>\n\n            <input\n              {...register('email')}\n              id=\"cta-email\"\n              type=\"email\"\n              className=\"block w-full px-5 py-3 text-base text-gray-900 placeholder-gray-500 border border-transparent rounded-md shadow-sm\"\n              placeholder=\"Enter your email\"\n            />\n\n            {formState.state === 'success' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-green-700 dark:text-green-500\">\n                {formState.message}\n              </div>\n            )}\n            {formState.state === 'error' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-red-700 dark:text-red-500\">\n                {formState.message}\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              className=\"block w-full px-5 py-3 mt-4 text-base font-medium text-white bg-gray-600 border border-transparent rounded-md shadow hover:bg-gray-400 focus:outline-none sm:px-10\"\n            >\n              Subscribe\n            </button>\n          </div>\n        </form>\n      </Container>\n    </div>\n  );\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import Container from 'components/Container';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport addSubscriber from 'utils/addSubscriber';\nimport Confetti from './Confetti';\n\nexport default function Subscribe() {\n  const [formState, setFormState] = useState({ state: 'initial', message: '' });\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async data => {\n    setFormState({ state: 'loading', message: null });\n    const { error } = await addSubscriber(data.email);\n\n    if (error) {\n      return setFormState({ state: 'error', message: error });\n    }\n\n    return setFormState({\n      state: 'success',\n      message: 'Check your email to confirm your subscription'\n    });\n  };\n\n  return (\n    <div className=\"py-24 bg-gray-100\">\n      <Container>\n        <div className=\"sm:text-center\">\n          <div className=\"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n            Subscribe to the newsletter\n          </div>\n          <p className=\"max-w-2xl mx-auto mt-4 text-lg text-gray-500\">\n            Get emails from me about web development, tech, and early access to new\n            articles.\n          </p>\n        </div>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"mt-8 sm:mx-auto sm:max-w-lg sm:flex\"\n        >\n          <div className=\"flex-1 min-w-0\">\n            <label htmlFor=\"cta-email\" className=\"sr-only\">\n              Email address\n            </label>\n\n            <input\n              {...register('email')}\n              id=\"cta-email\"\n              type=\"email\"\n              className=\"block w-full px-5 py-3 text-base text-gray-900 placeholder-gray-500 border border-transparent rounded-md shadow-sm\"\n              placeholder=\"Enter your email\"\n            />\n\n            {formState.state === 'success' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-green-700 dark:text-green-500\">\n                {formState.message}\n              </div>\n            )}\n            {formState.state === 'error' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-red-700 dark:text-red-500\">\n                {formState.message}\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              className=\"block w-full px-5 py-3 mt-4 text-base font-medium text-white bg-gray-600 border border-transparent rounded-md shadow hover:bg-gray-400 focus:outline-none sm:px-10\"\n            >\n              Subscribe\n            </button>\n          </div>\n        </form>\n      </Container>\n    </div>\n  );\n}","href":null}]}},{"object":"block","id":"198764bb-1cf5-81ef-bfec-d860b8fc6af9","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}}],"slug":"react-subscribe-form-with-tailwind-using-convertkit-api","moreArticles":[{"id":"198764bb-1cf5-8110-8f23-e6ec5a9fe5f3","title":"Deploy your Notion blog powered by Nextjs and Tailwind","categories":["React","Opensource"],"thumbnail":"https://prod-files-secure.s3.us-west-2.amazonaws.com/fda03e42-8bd6-485f-91b6-c40d0331d0d7/0d233b60-76b6-4628-97bd-5724ce0bc6da/v4.webp?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4663MAIDJZ4%2F20250302%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250302T181925Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDVjJsZ%2FE7dRvRpz4TUWlay8u5bZcLV%2B%2FILaxTqC6NE%2BQIhAIcYrwN9P5F%2F66jmv2JB3LTVc%2FyAMIb7vsNYrDjWB4AnKogECML%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQABoMNjM3NDIzMTgzODA1IgyZytLFf16kwCytAGEq3APcMYYLmK24pFoj80sOnSxDLNoWOXSBZ4iALvn4yzlqnDbC5LoIlNcuNpdx7lN%2BvSvwONQ7KufpJwU3XUS5piXwQsRix%2FaonX%2BkwzODtnjBVDjCDw410HBH7Snuq1HD5XA6IzO9P6IP18ykUMf%2F7h81m9UiQR4OS%2BjzRoSHsd9MEFSsXjdwgMlvI4m2GFm9nycEQuHkTy1O4NWmIR1Uj3WcC%2BkdTeuhV3acMwQBfu7GuPYa0WB8jzzKXBEkXAlLdfHQmFoN62G43LvvBEfSrLc%2FVBIJ28hR0SygpWwqHQhh1xpiW3KXTWndcL%2FVHi86eGxhlqSmkN8MyyiSLdRnGKroPPW429m%2B8YLgBPF3MjCrlNpTf4ChX3BZGvfLcTMphUGWuDuL5%2FBr4iQ5wb7YDcmYaJrvTybug5LnwnfcuGOQWhSuCgOTO8ip3w46Zj2M4sIMkPG247j0kdMLcIJqK%2FNozbCIkLznAUS5cE8ycpnQ%2F07VeIlBvQTUgDZvey9%2B1dT9qIhQQKlcSoO3AaXGoE00WPvRdFWE7EmgMj%2F69wl1PRlnmRFhBEOU56Wim9XgHc7rvf3GfpmIXdaF07UPQ1powm721xjfcVfUBoY6H2c2ook%2BFo1naWyqaOfUPTDnlJK%2BBjqkAcvmuQV2I2Lde7CVA%2BciCtceMMGHtzBMxhU1o0AOy9N7BT3155m7YPP3rZ1ipBQtEKvUy033AcxR5VBZnR8Iq1Pg%2FqPNc8lMbd6RC%2B%2F9V3GiRXYjqRXEnYU%2BHtzqmGti5gYzXU7Q5VV7nrVCNz1aEnrHyu2Jn7e67SfzS24l%2F14dlzG7DrPi78TvJb9FzaiHvcuw9E5H2tBlDVz05L30UL0gIecO&X-Amz-Signature=ac63e42c9983ddc136f0ef3687f592a40b784daba916784df98da955dee08c0c&X-Amz-SignedHeaders=host&x-id=GetObject","publishedDate":"2022-08-23","lastEditedAt":"2025-02-12T06:33:00.000Z","summary":"How to build a blog using nextjs-notion-blog-starter"},{"id":"198764bb-1cf5-81cf-83f0-f17fe60a5149","title":"How to make Confetti with React in 5 minutes ðŸŽ‰","categories":["Javascript","React"],"thumbnail":"https://images.unsplash.com/photo-1531686264889-56fdcabd163f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80","publishedDate":"2022-08-17","lastEditedAt":"2025-02-12T06:21:00.000Z","summary":"How to make confetti effect with react-canvas-confetti package in React."}]},"__N_SSG":true}