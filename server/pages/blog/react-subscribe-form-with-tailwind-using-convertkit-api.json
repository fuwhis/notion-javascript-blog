{"pageProps":{"id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad","title":"React subscribe form with Tailwind using ConvertKit API","categories":["React","API"],"thumbnail":"https://images.unsplash.com/photo-1596526131083-e8c633c948d2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80","publishedDate":"2022-08-17","lastEditedAt":"2025-02-12T06:21:00.000Z","summary":"How to make a subscription form with Tailwind and using Convertkit","content":[{"object":"block","id":"198764bb-1cf5-81c8-8385-c2e3e740b47f","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"API subscribe","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"API subscribe","href":null}]}},{"object":"block","id":"198764bb-1cf5-81bf-ba2a-d9cfa109d493","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"Here is a video of what we will be building today.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here is a video of what we will be building today.","href":null}]}},{"object":"block","id":"198764bb-1cf5-8112-b517-fb056a0ef0fa","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"typescript","text":[{"type":"text","text":{"content":"import isValidEmail from 'utils/isValidEmail';\n\nconst subscribeConvertkit = async (req, res) => {\n  const { email } = JSON.parse(req.body);\n\n  const isValid = isValidEmail(email);\n\n  if (!email) {\n    return res.status(400).json({ error: 'Email is required.' });\n  }\n\n  if (!isValid) {\n    return res.status(400).json({ error: 'Email is invalid.' });\n  }\n\n  try {\n    const FORM_ID = process.env.CONVERTKIT_FORM_ID;\n    const API_KEY = process.env.CONVERTKIT_API_KEY;\n    const API_URL = process.env.CONVERTKIT_API_URL;\n\n    const response = await fetch(`${API_URL}forms/${FORM_ID}/subscribe`, {\n      body: JSON.stringify({ email, api_key: API_KEY }),\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST'\n    });\n\n    // something went wrong on the convertkit server\n    if (response.status >= 400) {\n      return res\n        .status(400)\n        .json({ error: 'There was an error subscribing to the list.' });\n    }\n\n    // Success\n    return res.status(201).json({ error: null });\n  } catch (error) {\n    return res.status(500).json({ error: error.message || error.toString() });\n  }\n};\n\nexport default subscribeConvertkit;","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import isValidEmail from 'utils/isValidEmail';\n\nconst subscribeConvertkit = async (req, res) => {\n  const { email } = JSON.parse(req.body);\n\n  const isValid = isValidEmail(email);\n\n  if (!email) {\n    return res.status(400).json({ error: 'Email is required.' });\n  }\n\n  if (!isValid) {\n    return res.status(400).json({ error: 'Email is invalid.' });\n  }\n\n  try {\n    const FORM_ID = process.env.CONVERTKIT_FORM_ID;\n    const API_KEY = process.env.CONVERTKIT_API_KEY;\n    const API_URL = process.env.CONVERTKIT_API_URL;\n\n    const response = await fetch(`${API_URL}forms/${FORM_ID}/subscribe`, {\n      body: JSON.stringify({ email, api_key: API_KEY }),\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST'\n    });\n\n    // something went wrong on the convertkit server\n    if (response.status >= 400) {\n      return res\n        .status(400)\n        .json({ error: 'There was an error subscribing to the list.' });\n    }\n\n    // Success\n    return res.status(201).json({ error: null });\n  } catch (error) {\n    return res.status(500).json({ error: error.message || error.toString() });\n  }\n};\n\nexport default subscribeConvertkit;","href":null}]}},{"object":"block","id":"198764bb-1cf5-817c-872d-dafab2df1cea","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-813f-8991-e527451d5bf7","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"AddSubscriber fetcher","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"AddSubscriber fetcher","href":null}]}},{"object":"block","id":"198764bb-1cf5-81d9-9a99-c144006e8828","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"For submitting the subscription, let's create a simple handler that returns the result from the API call ðŸŽ‰ ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For submitting the subscription, let's create a simple handler that returns the result from the API call ðŸŽ‰ ","href":null}]}},{"object":"block","id":"198764bb-1cf5-814d-ae71-e287d51a95da","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"javascript","text":[{"type":"text","text":{"content":"export default async function addSubscriber(email) {\n  // The location of your API route\n  const url = '/api/subscribe-convertkit';\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ email })\n  });\n\n  const result = await response.json();\n\n  return result;\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export default async function addSubscriber(email) {\n  // The location of your API route\n  const url = '/api/subscribe-convertkit';\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({ email })\n  });\n\n  const result = await response.json();\n\n  return result;\n}","href":null}]}},{"object":"block","id":"198764bb-1cf5-8158-9f54-d1dce410f02f","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-81cb-a35d-f7b60bcb90a3","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"heading_3","heading_3":{"is_toggleable":false,"color":"default","text":[{"type":"text","text":{"content":"React Subscribe component","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"React Subscribe component","href":null}]}},{"object":"block","id":"198764bb-1cf5-81bd-b59b-f8804b192aa6","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[{"type":"text","text":{"content":"Now we have the API ready and the fetcher ready, so we can get into creating the Subscribe component","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Now we have the API ready and the fetcher ready, so we can get into creating the Subscribe component","href":null}]}},{"object":"block","id":"198764bb-1cf5-813b-861c-c331fd6fea3d","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}},{"object":"block","id":"198764bb-1cf5-81a2-9805-eab90b0b8ef2","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"code","code":{"caption":[],"language":"javascript","text":[{"type":"text","text":{"content":"import Container from 'components/Container';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport addSubscriber from 'utils/addSubscriber';\nimport Confetti from './Confetti';\n\nexport default function Subscribe() {\n  const [formState, setFormState] = useState({ state: 'initial', message: '' });\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async data => {\n    setFormState({ state: 'loading', message: null });\n    const { error } = await addSubscriber(data.email);\n\n    if (error) {\n      return setFormState({ state: 'error', message: error });\n    }\n\n    return setFormState({\n      state: 'success',\n      message: 'Check your email to confirm your subscription'\n    });\n  };\n\n  return (\n    <div className=\"py-24 bg-gray-100\">\n      <Container>\n        <div className=\"sm:text-center\">\n          <div className=\"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n            Subscribe to the newsletter\n          </div>\n          <p className=\"max-w-2xl mx-auto mt-4 text-lg text-gray-500\">\n            Get emails from me about web development, tech, and early access to new\n            articles.\n          </p>\n        </div>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"mt-8 sm:mx-auto sm:max-w-lg sm:flex\"\n        >\n          <div className=\"flex-1 min-w-0\">\n            <label htmlFor=\"cta-email\" className=\"sr-only\">\n              Email address\n            </label>\n\n            <input\n              {...register('email')}\n              id=\"cta-email\"\n              type=\"email\"\n              className=\"block w-full px-5 py-3 text-base text-gray-900 placeholder-gray-500 border border-transparent rounded-md shadow-sm\"\n              placeholder=\"Enter your email\"\n            />\n\n            {formState.state === 'success' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-green-700 dark:text-green-500\">\n                {formState.message}\n              </div>\n            )}\n            {formState.state === 'error' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-red-700 dark:text-red-500\">\n                {formState.message}\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              className=\"block w-full px-5 py-3 mt-4 text-base font-medium text-white bg-gray-600 border border-transparent rounded-md shadow hover:bg-gray-400 focus:outline-none sm:px-10\"\n            >\n              Subscribe\n            </button>\n          </div>\n        </form>\n      </Container>\n    </div>\n  );\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import Container from 'components/Container';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport addSubscriber from 'utils/addSubscriber';\nimport Confetti from './Confetti';\n\nexport default function Subscribe() {\n  const [formState, setFormState] = useState({ state: 'initial', message: '' });\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = async data => {\n    setFormState({ state: 'loading', message: null });\n    const { error } = await addSubscriber(data.email);\n\n    if (error) {\n      return setFormState({ state: 'error', message: error });\n    }\n\n    return setFormState({\n      state: 'success',\n      message: 'Check your email to confirm your subscription'\n    });\n  };\n\n  return (\n    <div className=\"py-24 bg-gray-100\">\n      <Container>\n        <div className=\"sm:text-center\">\n          <div className=\"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n            Subscribe to the newsletter\n          </div>\n          <p className=\"max-w-2xl mx-auto mt-4 text-lg text-gray-500\">\n            Get emails from me about web development, tech, and early access to new\n            articles.\n          </p>\n        </div>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"mt-8 sm:mx-auto sm:max-w-lg sm:flex\"\n        >\n          <div className=\"flex-1 min-w-0\">\n            <label htmlFor=\"cta-email\" className=\"sr-only\">\n              Email address\n            </label>\n\n            <input\n              {...register('email')}\n              id=\"cta-email\"\n              type=\"email\"\n              className=\"block w-full px-5 py-3 text-base text-gray-900 placeholder-gray-500 border border-transparent rounded-md shadow-sm\"\n              placeholder=\"Enter your email\"\n            />\n\n            {formState.state === 'success' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-green-700 dark:text-green-500\">\n                {formState.message}\n              </div>\n            )}\n            {formState.state === 'error' && (\n              <div className=\"my-2 mb-4 ml-2 text-sm font-semibold text-red-700 dark:text-red-500\">\n                {formState.message}\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              className=\"block w-full px-5 py-3 mt-4 text-base font-medium text-white bg-gray-600 border border-transparent rounded-md shadow hover:bg-gray-400 focus:outline-none sm:px-10\"\n            >\n              Subscribe\n            </button>\n          </div>\n        </form>\n      </Container>\n    </div>\n  );\n}","href":null}]}},{"object":"block","id":"198764bb-1cf5-81ef-bfec-d860b8fc6af9","parent":{"type":"page_id","page_id":"198764bb-1cf5-8134-95a4-d0ffbee4c4ad"},"created_time":"2025-02-12T06:21:00.000Z","last_edited_time":"2025-02-12T06:21:00.000Z","created_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"last_edited_by":{"object":"user","id":"23ef71fe-5706-40f5-86e7-fb2b7765d0a5"},"has_children":false,"archived":false,"in_trash":false,"type":"paragraph","paragraph":{"color":"default","text":[]}}],"slug":"react-subscribe-form-with-tailwind-using-convertkit-api","moreArticles":[{"id":"198764bb-1cf5-801d-8924-dc1c7181dadd","title":"JavaScript vs Golang","categories":["Coding","Javascript"],"thumbnail":"https://images.unsplash.com/photo-1505238680356-667803448bb6?q=80&w=2370&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","publishedDate":"2025-02-12","lastEditedAt":"2025-02-12T06:53:00.000Z","summary":"New blog to write javascript deep dive"},{"id":"198764bb-1cf5-8110-8f23-e6ec5a9fe5f3","title":"Deploy your Notion blog powered by Nextjs and Tailwind","categories":["React","Opensource"],"thumbnail":"https://prod-files-secure.s3.us-west-2.amazonaws.com/fda03e42-8bd6-485f-91b6-c40d0331d0d7/0d233b60-76b6-4628-97bd-5724ce0bc6da/v4.webp?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SLBV5UEM%2F20250302%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250302T180313Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCIzWtVUP246pJ%2FaieGP9dFxGVB8cc0g40Hz1qtb3mJVwIgBf6mkEgTMbQXcX5mzzDCKXMMag74AOENjkzk82p3fzgqiAQIwv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgw2Mzc0MjMxODM4MDUiDJrC4sfKsSXDBL62mCrcA6Kq1I0%2BgKRRqmNW3xztG4cbQ6S6k8k2gi6dgNZgjFth2GR5sZixy7bNuSWN%2FQkf3GiSbzZKXsMmbxxMH%2FuY5QTta9mNX%2Bm7QyTSnywH15DIAURGpmKAOD2pFf%2BWg1ntl8juIIo%2FbkqfmSK8MRB%2BLTw4CyKpH6F3IhaIUCBk3XoqmSaSX9HFQzMjlehOAO8SLoXLeEFGQ1otjZP2is%2F5HGgSvkccrT9S%2FNBJEZz%2Bcy2R3l8n0WBjCjLsrKxBlJOZez7sXadLCEeyUKljvCSNNyFY6R9LPy6S%2FqOSYeq%2FGDyh2zgZ3j03JLyi3og0QtgyQMOjGFmGshOnTT2ACQh8QMpb%2BssiQiUy51MsH2lxBFdEXYHTxrQLcKItubd9pMTYa7qdIrLRTqEdr36D32NrTRh8VA25ywuhFDjjX2PP6o7qdeuqPjOTgd8ns%2BNQxEyfSWlbjYZP6GSrGuaFuYKuk6tPPd0nDffrgvVBKaPcl57XH78jTDQF2FquPvO6UpZCLjN54Zch1ShsslIwUV02C5tJsZr2Hda8UVOZhYEhfyviiUYBsfkaha9NdO5HRLtzPhCuUzZyodEJ8X34fxi%2FMHIa3uAWrv20QTSp4wwCMcYQgVKHq6KQgJw3I3ZxMP%2BYkr4GOqUBKL2OEopOvri%2BDj19PgGM3eiEaA5JGoQPjI61SYEepTPjtpA597eMHmpuntauMmjwecAeWTVHvHDvfhTm4H689lO0ORc8KV%2FsFS4aUKPuMzk%2F6TeS69ATJdr0vqHzMidPZxwbEhNbBiVPTglZzA%2Fggk9xffqmDWcp1wWiwGUxd0yQlEnDuKyHlcAb8DRaewqDgLaB1o6gIbxBhUc3H2OgMpJlWWc5&X-Amz-Signature=6d82238fd16557dad4a3186a8352b5a5a10c983742b9ad68cfa752633c4a8f3e&X-Amz-SignedHeaders=host&x-id=GetObject","publishedDate":"2022-08-23","lastEditedAt":"2025-02-12T06:33:00.000Z","summary":"How to build a blog using nextjs-notion-blog-starter"}]},"__N_SSG":true}