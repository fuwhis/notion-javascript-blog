"use strict";
exports.id = 318;
exports.ids = [318];
exports.modules = {

/***/ 8318:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8684);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_dom_server__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var is_lambda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4076);
/* harmony import */ var is_lambda__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(is_lambda__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2037);
/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6330);
/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(deepmerge__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var twemoji__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8091);
/* harmony import */ var twemoji__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(twemoji__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var puppeteer_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1107);
/* harmony import */ var puppeteer_core__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(puppeteer_core__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7893);
/* harmony import */ var chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6__);
function s(){return s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l=["body","query"];function c(t){var c=(t=deepmerge__WEBPACK_IMPORTED_MODULE_3___default()({strategy:"query",cacheControl:"max-age 3600, must-revalidate",width:1200,height:630,type:"png",quality:90,hook:null,chrome:{args:null,executable:null},dev:{inspectHtml:!0,errorsInResponse:!0}},t)).template,h=c.html,v=c.react,f=t.cacheControl,d=t.strategy,g=t.type,y=t.width,b=t.hook,P=t.height,w=t.quality,x=t.chrome,j=x.args,C=x.executable,q=t.dev,O=q.inspectHtml,S=q.errorsInResponse;if(h&&v)throw new Error("Ambigious template provided. You must provide either `html` or `react` template.");if(!h&&!v)throw new Error("No template was provided.");var E,A,N="production",H=function(){var e=[].slice.call(arguments);return function(){try{return Promise.resolve(e.reduce(function(e,r){try{return Promise.resolve(e).then(function(e){return Promise.resolve(r(e))})}catch(e){return Promise.reject(e)}},Promise.resolve({envMode:"production"})))}catch(e){return Promise.reject(e)}}}(p,(E={width:y,height:P},A={args:j,executable:C},function(e){try{var t=e.page,n=e.envMode,o=e.executable;return t?Promise.resolve(s({},e,{page:t})):Promise.resolve(function(e,t,n){try{if(m(e)){if((is_lambda__WEBPACK_IMPORTED_MODULE_1___default())){var o=(chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6___default().args);return Promise.resolve((chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6___default().executablePath)).then(function(e){return{args:o,executablePath:e,headless:(chrome_aws_lambda__WEBPACK_IMPORTED_MODULE_6___default().headless)}})}var a,s;return Promise.resolve({args:null!=(a=null==n?void 0:n.args)?a:[],executablePath:null!=(s=null==n?void 0:n.executable)?s:t,headless:!0})}var u,l;return Promise.resolve({args:null!=(u=null==n?void 0:n.args)?u:[],executablePath:null!=(l=null==n?void 0:n.executable)?l:t,headless:!0})}catch(e){return Promise.reject(e)}}(n,o,A)).then(function(r){return Promise.resolve(puppeteer_core__WEBPACK_IMPORTED_MODULE_5___default().launch(r)).then(function(r){return Promise.resolve(r.newPage()).then(function(r){return Promise.resolve(r.setViewport(E)).then(function(){return s({},e,{page:r})})})})})}catch(e){return Promise.reject(e)}}),function(e){var r=e.inspectHtml,t=e.type,n=e.quality;return function(e){var o=e.page,a=e.envMode;return s({},e,{createImage:function(e){try{return Promise.resolve(o.setContent(e)).then(function(){return Promise.resolve(!m(a)&&r?o.content():o.screenshot(s({type:t,encoding:"binary"},"jpeg"===t?{quality:n}:null)))})}catch(e){return Promise.reject(e)}}})}}({inspectHtml:O,type:g,quality:w}));return function(r,t){try{!function(e,r,t,n){var o={body:function(){var e=t.method,o=t.headers["content-type"];if("POST"!==e&&"application/json"!==o){var a="Strategy is set to `body` so parameters must be passed by POST request and JSON payload. Current method: "+e+" and current content type: "+o;throw r&&n.json({message:a}),new Error(a)}},query:function(){var e=t.method;if("GET"!==e){var o="Strategy is set to `query` so parameters must be passed by GET request and query params. Current method: "+e;throw r&&n.json({message:o}),new Error(o)}}}[e];if(!o)throw new Error("Unknown strategy provided. Possible values: "+l);o()}(d,!m(N)&&S,r,t);var n=JSON.parse(JSON.stringify("query"===d?r.query:r.body,function(e,r){return r&&"object"==typeof r?r:""+r}));return Promise.resolve(H()).then(function(a){function i(i){function l(n){var i=h&&!v?n:(0,react_dom_server__WEBPACK_IMPORTED_MODULE_0__.renderToStaticMarkup)(n);return Promise.resolve(a.createImage(function(e){return"<style>\n    .emoji {\n      height: 1em;\n      width: 1em;\n      margin: 0 .05em 0 .1em;\n      vertical-align: -0.1em;\n    }\n  </style>"+twemoji__WEBPACK_IMPORTED_MODULE_4___default().parse(e,{folder:"svg",ext:".svg"})}(i))).then(function(e){function n(){t.setHeader("Content-Type",!m(N)&&O?"text/html":g?"image/"+g:"image/png"),t.setHeader("Cache-Control",f),t.write(e),t.end()}var o=function(){if(b){var n=s({},r,{image:e});return Promise.resolve(b(n)).then(function(e){if(e)for(var r,n=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}(e))){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.entries());!(r=n()).done;){var o=r.value;t.setHeader(o[0],o[1])}})}}();return o&&o.then?o.then(n):n()})}return h&&!v?l(h&&!v?i:v(s({},n))):Promise.resolve(h&&!v?i:v(s({},n))).then(l)}return h&&!v?Promise.resolve(h&&!v?h(s({},n)):0).then(i):i(h&&!v?h(s({},n)):0)})}catch(e){return Promise.reject(e)}}}function m(e){return"production"===e||"staging"===e}function p(e){return s({},e,{executable:"win32"===process.platform?["arm64","ppc64","x64","s390x"].includes(os__WEBPACK_IMPORTED_MODULE_2___default().arch())?"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe":"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe":"linux"===process.platform?"/usr/bin/google-chrome":"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"})}
//# sourceMappingURL=next-api-og-image.module.js.map


/***/ })

};
;